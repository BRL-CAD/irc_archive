<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
 <title>IRC log for #brlcad on 20170729</title>
 <meta name="generator" content="irclog2html.pl">
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body text="#000000" bgcolor="#ffffff">
<h1>IRC log for #brlcad on 20170729</h1>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Default -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-1563266826402652"
     data-ad-slot="5026919875"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<form action="http://www.google.com" id="cse-search-box">
  <div>
    <input type="hidden" name="cx" value="partner-pub-1563266826402652:3301963896" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<table cellspacing=3 cellpadding=2 border=0>
<tr><td><tt>01:48.21</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad kintel (~kintel@unaffiliated/kintel)</font></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>02:41.57</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70018 (brlcad/trunk/src/other/openscenegraph/CMakeLists.txt brlcad/trunk/src/other/openscenegraph/CMakeModules/UtilityMacros.cmake): We don't appear to actually be using the LOCATION property for anything in our build of osg</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>03:15.38</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70019 brlcad/trunk/src/other/PoissonRecon/CMakeLists.txt: Doesn't seem to be any reason in this file for 0053 to be set to old</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>03:26.06</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70020 (brlcad/trunk/CMakeLists.txt brlcad/trunk/misc/svn2git/svn2git/CMakeLists.txt and 29 others): Bump to 3.0.2 across the board, remove older policy logic. Looks like the only remaining dependency on any OLD policy setting is a test in Tcl that needs 0053 set to old (quoting rules). This sets the stage for doing some experiments with the new TARGET build-time evaluation expressions, which</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>03:26.08</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>may (not sure yet) have the potential to simplify some of the build logic.</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>03:26.10</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>...</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>03:42.28</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70021 brlcad/trunk/src/other/tcl/CMakeLists.txt: update quoting for strstr test</tt></td></tr>
<tr><td><tt>04:41.11</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad deep-book-gk_ (~1wm_su@159.122.132.44)</font></tt></td></tr>
<tr><td><tt>04:42.00</tt></td><td colspan=2><tt><font color="#000099">*** part/#brlcad deep-book-gk_ (~1wm_su@159.122.132.44)</font></tt></td></tr>
<tr><td><tt>07:02.34</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad Caterpillar (~caterpill@unaffiliated/caterpillar)</font></tt></td></tr>
<tr><td><tt>15:20.49</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad yorik (~yorik@2804:431:f720:4929:290:f5ff:fedc:3bb2)</font></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>18:12.54</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>starseeker: answering your question from a while back, yes <a href="https://sourceforge.net/p/brlcad/code/HEAD/tree/rt%5E3/trunk/src/g3d/">https://sourceforge.net/p/brlcad/code/HEAD/tree/rt%5E3/trunk/src/g3d/</a> has mafm's camera code</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>18:12.55</tt></td><td><font color="#b86161"><tt>i5o</tt></font></td><td width="100%"><tt>[&nbsp;&nbsp; BRL-CAD / Code&nbsp;&nbsp;&nbsp;&nbsp;/ [r70024] /rt^3/trunk/src/g3d ]</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>18:14.52</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>starseeker: and looking through, it does look like it was a custom safe-to-use implementation -- coupled to ogre 3d types, but trivial to switch that to vmath types</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>18:15.07</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt><font color="#CC00CC">forgot how nice that all was, lots of good app structure...</font></tt></td></tr>
<tr><td><tt>18:52.44</tt></td><td colspan=2><tt><font color="#009900">*** topic/#brlcad by brlcad -&gt; This channel is for BRL-CAD and open source CAx discussion!  Logs @ <a href="http://infobot.rikers.org/%23brlcad/">http://infobot.rikers.org/%23brlcad/</a></font></tt></td></tr>
<tr><td><tt>19:31.39</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad KimK (~Kim__@2600:8803:7a81:7400:68cc:f967:6b4c:bb5f)</font></tt></td></tr>
<tr><td><tt>20:21.20</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad Notify (~notify@104.225.5.10)</font></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:21.26</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70022 brlcad/trunk/misc/CMake/BRLCAD_Util.cmake: Simplify the IS_SUBPATH function logic using SUBSTRING. Not actually a significant performance improvement, but fewer lines and easier to follow.</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:21.28</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70023 NIL: delete empty directories</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:21.30</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70024 brlcad/trunk/misc/CMake/BRLCAD_Util.cmake: Do some refactoring of CMAKEFLAGS tracking function</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:22.05</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70025 brlcad/trunk/src/tclscripts/checker/CMakeLists.txt: Add TODO to CMAKEFILES list</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:22.07</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70026 (brlcad/trunk/db/CMakeLists.txt brlcad/trunk/db/nist/CMakeLists.txt and 56 others): Start preparing the ground work for a distcheck introspection that is based entirely on files - no specification of directories. This will be both to simplify the logic and to increase robustness for the non-svn distcheck case - if we have all files listed explicitly, svn is not strictly needed to do a</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:22.09</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>full source repo verification. For the moment this will break distcheck, but need to checkpoint before the next stage.</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:22.11</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>...</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:22.16</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD Wiki:Mariomeissner * 10145 /wiki/User:Mariomeissner/logs: </tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:22.18</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD Wiki:Mariomeissner * 10146 /wiki/User:Mariomeissner/logs: </tt></td></tr>
<tr><td><tt>20:53.22</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad kintel (~kintel@unaffiliated/kintel)</font></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>21:03.41</tt></td><td><font color="#5caf5c"><tt>Notify</tt></font></td><td width="100%"><tt>03BRL-CAD:starseeker * 70027 (brlcad/trunk/misc/CMake/BRLCAD_Util.cmake brlcad/trunk/misc/CMake/source_archive_setup.cmake.in): This may get distcheck running again... needs more testing</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:11.15</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>super relevant paper .. I love the architecture simplicity: <a href="http://tabellion.org/et/paper17/MoonRay.pdf">http://tabellion.org/et/paper17/MoonRay.pdf</a></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:11.57</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>vectorized a production tracer just like rt, from DFT to BFT</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:17.01</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>When I tried making coherent ray queues on GPUs, to trace coherent bundles, I hit a wall on global memory bandwidth. And the on-chip shared memory wasn't large enough to store much</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:17.22</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Perhaps the L2 cache of CPUs can manage something better</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:18.12</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>paper utilized 4-way simd, cpu</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:18.32</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>well, n-way, but the intel box they were using was 4-way</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:19.08</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Right. And cache misses are far more catastrophical on CPUs than GPUs</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:19.09</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>it was a production rendering system, so for them, most of the time was in the shading/texturing phase -- there is where they got the largest gains</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:19.57</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Ah yes, of course! So the performance bottleneck wasn't coherent tracing in the scene, it was the texture memory access in the ray hit callback</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:20.24</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>It makes sense then. Because my experiments with coherent tracing were inconclusive regarding the performance of ray tracing itself</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:22.58</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>("coherent tracing" as in continuously rebuilding coherent bundles from incoherent rays, not primary coherent rays)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:23.03</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>yeah, their engine used embree under the hood for intersection</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:24.12</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Your bullet rays tend to be highly coherent anyway. :) For stuff like radio wave propagation, not so much</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:27.52</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>just heard a fantastic talk yesterday focused on incoherent rays, completely different approach</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:29.06</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Ah? Different from buffering them and making coherent bundles?</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:30.15</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>yes, because he wanted performance all the way down to single rays too (actually the focus)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:30.48</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>making a single ray trace as fast as possible</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:31.26</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>When I did ambient occlusion or global illumination, I just _made_ the secondary rays coherent. Neighbor primary rays generate secondary rays with coherent vectors, with an appropriate probability "weight"</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:31.41</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>So what's different about that?</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:32.18</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>because with a single ray, there's no other rays to make it (more) coherent</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:32.49</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>except for making it internally do things you might not think to otherwise</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:33.51</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Like testing bundles of 8 triangles in paralle, instead of 8 rays against one triangle?</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:34.06</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>One ray against bundles of 8 triangles, that is</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:34.24</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>sort of</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:34.53</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>more like one ray, bundling the traversal(s), against triangles</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:35.06</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>he used compression tricks, simd, and branchless coding</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:35.30</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>very nice speedups</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:35.43</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Well, I'm both curious and skeptical</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:36.12</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Testing bundles of 8 triangles is obviously good for incoherent rays (been there, done that). But... compression?</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:36.35</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>compression of the traversal</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:36.36</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Besides shifted 16 bits traversal offsets between nodes of the acceleration structure (done that too)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:36.41</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>I'll see if I can get the presentation</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:37.25</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>I order the content of my raytracing graphs so that you can jump between sectors and nodes with a 16 bits &lt;&lt; 4 offset</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:37.35</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>I guess that counts as compression</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:39.29</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>so instead of jumping between sectors, I think it would be kind of like evaluating multiple sectors simultaneously</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:39.49</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>no way I can describe it with justice, still haven't read the paper, but the talk was very compelling, interesting</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:40.51</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>branch-free traversal was a big point, no conditionals so the ray evaluates everything along the path (faster than evaluating and terminating conditionally)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:42.17</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Hrm. You end up fetching a _lot_ of pointless memory if the ray keeps going when it could just stop</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:43.03</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Unless you mean branchless testing of the triangles from a single sector. That's all right, it's already pulled into cache</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:43.33</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>no, branchless traversal (don't recall if triangle testing was also branchless)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:44.07</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>I am totally unconvinced by that</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:44.42</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>If I'm looking at a wall, I want my rays to stop there. Not continue to fetch geometry from the street outside</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:45.35</tt></td><td><font color="#b55f5f"><tt>brlcad</tt></font></td><td width="100%"><tt>that was the trick, though -- I don't think he fetched the geometry unnecessarily, at least not beyond a "traversal bundle" which might have been a bit past</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:46.11</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Sounds like branchless testing of all triangles into a sector, or something similar</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:47.57</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>I remember trying branchless triangle testing many years ago... It was slower everywhere, except on the Pentium 4 due their absurd branch misprediction penalty</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:49.05</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Although if you are testing bundles of 8 triangles for a ray, rather than 8 rays for a triangle, then you definitely want branchless</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:54.29</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>It is an intereting thought to have a whole CUDA warp test 32 triangles for a single ray. The graph evaluation cost function would have to be adjusted (fatter sectors, less sectors, lower memory consumption)</tt></td></tr>
<tr><td><tt>23:55.16</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad djkonro (~djkonro@129.0.42.239)</font></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>23:55.45</tt></td><td><font color="#6acaca"><tt>Stragus</tt></font></td><td width="100%"><tt>Sounds like a waste of processing potential during traversal though (not geometry intersection)</tt></td></tr>
<tr><td><tt>23:56.04</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad Notify (~notify@104.225.5.10)</font></tt></td></tr>
</table>

<br>Generated by irclog2html.pl
Modified by <a href="http://Rikers.org">Tim Riker</a> to work with
<a href="http://infobot.sourceforge.net/">infobot</a>.
</body></html>
