<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>irclog2html for #brlcad on 20060601</title>
	<meta name="generator" content="irclog2html.pl by Jeff Waugh">
	<meta name="version" content="Version 1.5 - 11th May 2000">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body text="#000000" bgcolor="#ffffff">
<h1>irclog2html for #brlcad on 20060601</h1>
<table cellspacing=3 cellpadding=2 border=0>
<tr bgcolor="#eeeeee"><td><tt>00:37.52</tt></td><td><font color="#6a6aca"><tt>Twingy</tt></font></td><td width="100%"><tt>All aboot the pentium's werd</tt></td></tr>
<tr><td><tt>01:39.05</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad DTRemenak (n=DTRemena@c-24-23-59-104.hsd1.ca.comcast.net)</font></tt></td></tr>
<tr><td><tt>07:28.20</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad DTRemenak|RDP (n=DTRemena@c-24-23-59-104.hsd1.ca.comcast.net)</font></tt></td></tr>
<tr><td><tt>08:30.05</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad DTRemenak (n=DTRemena@c-24-23-59-104.hsd1.ca.comcast.net)</font></tt></td></tr>
<tr><td><tt>12:50.40</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad rossberg (n=rossberg@bz.bzflag.bz)</font></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>12:51.47</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: 03bob1961 * 10brlcad/src/tclscripts/archer/Archer.tcl: Mods to remove the expand button when in "Basic" mode. There's also a minor tweak of the aboutDialog's size.</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>12:57.55</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: 03d_rossberg * 10brlcad/src/librt/db_open.c: </tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>12:57.55</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: do not close a mapped file while the database instance is still in use</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>12:57.55</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: as db_clone_dbi does not increment dbi_mf-&gt;uses</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>13:50.54</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>rossberg: i think i see the problem with just what you've said, but would it not be better to increment dbi_mf uses instead of not closing it?</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>13:51.24</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>otherwise uses is .. useless ;)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>13:54.54</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>dbi_uses is only incremented in db_open, so it should be safe to increment mf-&gt;uses there on the dbi clone</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>13:59.03</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>brlcad: i'm not sure but i think the handling of mf-&gt;uses is ok</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>13:59.35</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>dbi_uses will be incremented in db_clone_dbi too</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:00.22</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: 03brlcad * 10brlcad/src/librt/g_submodel.c: remove bad commented-out increment of the dbi_uses. it might benefit to just clone the dbi, but seems unnecessary for a plot routine</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:00.35</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>the handling of mf-&gt; uses is okay until you clone the dbi, no? :)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:01.17</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>without clone the whole thing is trivial</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:01.19</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>the issue is perhaps that the mapped files are globally shared</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:01.42</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>so cloning the dbip doesn't give you a new open mapped file descriptor</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:02.21</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>no: cloning only increments the reference counter (+ something else)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:02.33</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>this is for garbage collection</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:02.46</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>right, on the dbi</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:09.40</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>mf-&gt;uses counts references to a mapped file and dbi_uses counts references to a dbip</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:11.05</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>consequently adding or removing a reference to a database instance does not change the references to a mapped file</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:11.27</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>it is still the same database instance which refers to this file</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:14.20</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>and that seemed like a bug to me -- adding or removing a reference to a database instance could conceivably change the number of references to a mapped file</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:15.09</tt></td><td><font color="#cb6bcb"><tt>brlcad</tt></font></td><td width="100%"><tt>i think it'll work either way just because how mapped files are these global entities (especially if you just don't free them), just uses memory that could potentially be released</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:16.43</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>but this are all indirect references (as the are higher level references via rtip too)</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:18.20</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>it may be more clear if you think of dbi as an object</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:19.45</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>independent of the number of references to this object, it is still only one object</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:23.51</tt></td><td><font color="#6bcccc"><tt>rossberg</tt></font></td><td width="100%"><tt>btw, it looks like the true purpose of db_clone_dbi is the registration of an additional client</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:51.39</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: 03brlcad * 10brlcad/src/librt/db_open.c: allow for clientless cloning and closing of dbip instances where only the uses count is of interest. no need to stash null clients even though the ptbl will record them, just ignore them.</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>14:54.17</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: 03brlcad * 10brlcad/src/mged/ged.c: avoid incrementing the dbi_uses counter directly -- do a clientless clone of the dbip instead</tt></td></tr>
<tr><td><tt>16:05.21</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad digitalfredy (n=digitalf@200.71.62.161)</font></tt></td></tr>
<tr><td><tt>16:52.58</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad digitalfredy (n=digitalf@200.71.62.161)</font></tt></td></tr>
<tr><td><tt>18:48.37</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad DTRemenak|RDP (n=DTRemena@c-24-23-59-104.hsd1.ca.comcast.net)</font></tt></td></tr>
<tr><td><tt>18:48.51</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad digitalfredy (n=digitalf@200.71.62.161)</font></tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>20:14.56</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: 03brlcad * 10brlcad/src/libbu/ispar.c: gah, reduce the massive WIN32 block to just the section that mattered so that kill() is not invoked on a bu_bomb().. should eventually contain a WIN32-esque method for killing a parent process gracefully ala kill()</tt></td></tr>
<tr bgcolor="#eeeeee"><td><tt>22:37.59</tt></td><td><font color="#77e2e2"><tt>CIA-9</tt></font></td><td width="100%"><tt>BRL-CAD: 03brlcad * 10brlcad/src/libbu/bomb.c: avoid passing additional format arguments to fprintf() to avoid potential buffer allocations. very nominal benefit, but can conceivably help with certain crashes and implementations of fprintf().</tt></td></tr>
<tr><td><tt>23:29.05</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad digitalfredy (n=digitalf@200.71.62.161)</font></tt></td></tr>
<tr><td><tt>23:31.39</tt></td><td colspan=2><tt><font color="#009900">*** join/#brlcad justin_ (n=justin@c-68-33-163-43.hsd1.md.comcast.net)</font></tt></td></tr>
</table>

<br>Generated by irclog2html.pl by
<a href="mailto:jdub@NOSPAMaphid.net">Jeff Waugh</a> - find it at
<a href="http://freshmeat.net/appindex/2000/03/28/954251322.html">freshmeat.net</a>!
Modified by <a href="http://www.Rikers.org">Tim Riker</a> to work with
<a href="http://blootbot.sourceforge.net/">blootbot</a> logs, split per channel, etc.
</body></html>
