<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.6.0" />
<title>IRC log for #brlcad on 20130306</title>
<meta name="generator" content="irclog2html.pl" />
<meta http-equiv="Content-Type" content=
"text/html; charset=utf-8" />
<style type="text/css">
/*<![CDATA[*/
 body {
  background-color: #FFFFFF;
  color: #000000;
 }
 span.c7 {color: #DD7474}
 span.c6 {color: #6ED26E}
 span.c5 {color: #009900}
 tr.c4 {background-color: #EEEEEE}
 span.c3 {color: #CC00CC}
 span.c2 {color: #6262BB}
 ins.c1 {display:inline-block;width:728px;height:90px}
/*]]>*/
</style>
</head>
<body>
<h1>IRC log for #brlcad on 20130306</h1>
<script async="async" src=
"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Default -->
<ins class="adsbygoogle c1" data-ad-client=
"ca-pub-1563266826402652" data-ad-slot="5026919875"></ins> 
<script>
<![CDATA[

(adsbygoogle = window.adsbygoogle || []).push({});
]]>
</script>
<form action="http://www.google.com" id="cse-search-box">
<div><input type="hidden" name="cx" value=
"partner-pub-1563266826402652:3301963896" /> <input type="hidden"
name="ie" value="UTF-8" /> <input type="text" name="q" size="55" />
<input type="submit" name="sa" value="Search" /></div>
</form>
<script type="text/javascript" src=
"http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<table cellspacing="3" cellpadding="2" border="0">
<tr class="c4">
<td><tt>04:50.47</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt><span class="c3">does a happy code
dance</span></tt></td>
</tr>
<tr class="c4">
<td><tt>04:51.27</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>new page allocation compiled clean and worked
right on the first try, both counts</tt></td>
</tr>
<tr class="c4">
<td><tt>04:51.55</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>which by itself is meh, good, but with nuggets
like this in there, pretty aweseom:
&amp;(heaps[sz-1][pages[sz-1]-1][used[sz-1][pages[sz-1]-1]++]);</tt></td>
</tr>
<tr class="c4">
<td><tt>04:53.57</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>now to put it to a real-world test</tt></td>
</tr>
<tr class="c4">
<td><tt>05:25.31</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>wow, richard's pool allocator is considerably
worse than system malloc/free</tt></td>
</tr>
<tr class="c4">
<td><tt>05:29.13</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>hehe, and performance actually gets worse if
we don't free memory ...</tt></td>
</tr>
<tr class="c4">
<td><tt>05:29.44</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>some metrics</tt></td>
</tr>
<tr class="c4">
<td><tt>05:31.46</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>~52M mallocs: sys=5s pool=91s
heap=3s</tt></td>
</tr>
<tr class="c4">
<td><tt>05:34.27</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>~52M malloc+frees: sys=10s pool=73s
heap=4s</tt></td>
</tr>
<tr class="c4">
<td><tt>08:15.17</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>welp, it's hooked into libbu now and running
some numbers now ... will see where this might have a useful
impast</tt></td>
</tr>
<tr class="c4">
<td><tt>08:15.29</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt><span class="c3">calls it a
night</span></tt></td>
</tr>
<tr>
<td><tt>08:28.48</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad witness
(uid10044@gateway/web/irccloud.com/x-obaiatmvbsvdcgkq)</span></tt></td>
</tr>
<tr>
<td><tt>08:38.38</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad luca79
(~luca@net-2-34-220-10.cust.dsl.vodafone.it)</span></tt></td>
</tr>
<tr>
<td><tt>09:03.44</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad Black_Rabbit
(~Black_Rab@115.248.130.148)</span></tt></td>
</tr>
<tr>
<td><tt>09:19.52</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad merzo
(~merzo@94.45.58.138)</span></tt></td>
</tr>
<tr>
<td><tt>09:36.05</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad merzo
(~merzo@user-94-45-58-138-1.skif.com.ua)</span></tt></td>
</tr>
<tr>
<td><tt>12:49.12</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad Black_Rabbit
(~Black_Rab@115.248.130.148)</span></tt></td>
</tr>
<tr>
<td><tt>13:28.37</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad Black_Rabbit
(~Black_Rab@115.248.130.148)</span></tt></td>
</tr>
<tr class="c4">
<td><tt>13:41.02</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>preliminary numbers are in for conversion,
it's giving about a 30% reduction in time</tt></td>
</tr>
<tr class="c4">
<td><tt>13:41.34</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>a 4 min conversion is reduced to 2 and a half
min</tt></td>
</tr>
<tr>
<td><tt>13:49.27</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad luca79
(~luca@net-2-34-220-10.cust.dsl.vodafone.it)</span></tt></td>
</tr>
<tr>
<td><tt>15:35.57</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad merzo
(~merzo@94.45.58.138)</span></tt></td>
</tr>
<tr>
<td><tt>15:41.54</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad Black_Rabbit
(~Black_Rab@115.248.130.148)</span></tt></td>
</tr>
<tr class="c4">
<td><tt>15:42.25</tt></td>
<td><span class="c6"><tt>``Erik</tt></span></td>
<td width="100%"><tt>nifty</tt></td>
</tr>
<tr>
<td><tt>16:15.44</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad merzo
(~merzo@user-94-45-58-138-1.skif.com.ua)</span></tt></td>
</tr>
<tr class="c4">
<td><tt>16:51.30</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54534
brlcad/trunk/src/other/tcl/CMakeLists.txt: shouldn't be compiling
tclAppInit into libtcl -- it contains a main() intended for front
end clients like tclsh</tt></td>
</tr>
<tr class="c4">
<td><tt>17:33.59</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:carlmoore * 54535
brlcad/trunk/src/fb/bw-fb.c: insert space before a left
parenthesis</tt></td>
</tr>
<tr class="c4">
<td><tt>19:55.15</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54536
(brlcad/trunk/src/librt/db5_io.c
brlcad/trunk/src/librt/db5_scan.c): remove the pooling on geometry
objects at the IO layer. testing of the pooling calls indicated
performance was substantially slower than system malloc/free (by an
order of magnitude).</tt></td>
</tr>
<tr class="c4">
<td><tt>20:47.59</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54537
brlcad/trunk/include/bu.h: examples should do what the api docs
say, if we call BU_GET() then we should call BU_PUT() ... not
bu_free().</tt></td>
</tr>
<tr class="c4">
<td><tt>20:49.34</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54538
brlcad/trunk/include/nmg.h: BU_PUT() to match BU_GET()</tt></td>
</tr>
<tr>
<td><tt>20:52.01</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad merzo
(~merzo@6-121-133-95.pool.ukrtel.net)</span></tt></td>
</tr>
<tr class="c4">
<td><tt>20:57.47</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54539
brlcad/trunk/src/libged/ged.c: match BU_PUT() to BU_GET()
allocation</tt></td>
</tr>
<tr class="c4">
<td><tt>21:47.53</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:carlmoore * 54540
brlcad/trunk/src/util/bw3-pix.c: use capital U</tt></td>
</tr>
<tr class="c4">
<td><tt>22:02.45</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54541
brlcad/trunk/include/nurb.h: call bu_calloc instead of BU_GET since
we don't call the corresponding BU_PUT</tt></td>
</tr>
<tr class="c4">
<td><tt>22:02.55</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54542
brlcad/trunk/include/nmg.h: cast makes for an invalid lvalue,
remove it</tt></td>
</tr>
<tr class="c4">
<td><tt>22:25.03</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54543
(brlcad/trunk/src/libbu/heap.c
===================================================================
and 202 others): stub in an initial implementation of a really fast
heap-based memory allocation capability for small allocation sizes.
it allocates size-designated blocks of memory ('pages') in order to
substantially reduce calls to system malloc. it has a nice property
of being O(1) on alloc</tt></td>
</tr>
<tr class="c4">
<td><tt>22:25.05</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>and profiles substantially faster than system
malloc. from half to several orders of magnitude in testing (making
the call cost near-zero). presently only implemented for byte sizes
1 through 64 (trivial to extend). implementation of free is stubbed
empty, but intend to reuse free cells and reclaim memory on-demand.
made to match BU_GET/BU_PUT so it can serve as the back-end
implementation.</tt></td>
</tr>
<tr class="c4">
<td><tt>22:27.41</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>``Erik: heh, "and 202 others" .. don't think
that's right</tt></td>
</tr>
<tr class="c4">
<td><tt>22:27.44</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54544
(brlcad/trunk/src/libbu/CMakeLists.txt
brlcad/trunk/src/libbu/Makefile.am): add new heap.c for
compilation</tt></td>
</tr>
<tr class="c4">
<td><tt>22:33.10</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54545
brlcad/trunk/include/raytrace.h: the motivation for
RT_GET_TREE()/RT_FREE_TREE() and keeping a free list in the
resource structure may be moot or at least unnecessary now, but
warrants performance testing</tt></td>
</tr>
<tr class="c4">
<td><tt>22:38.02</tt></td>
<td><span class="c7"><tt>Notify</tt></span></td>
<td width="100%"><tt>03BRL-CAD:brlcad * 54546 brlcad/trunk/CHANGES:
deprecate RT_GET_TREE() and RT_FREE_TREE(). probably minimally
impacting, but needs some review/testing so just
scheduled</tt></td>
</tr>
<tr class="c4">
<td><tt>23:07.18</tt></td>
<td><span class="c6"><tt>``Erik</tt></span></td>
<td width="100%"><tt>the parser got confused, the ===== stuff
shouldn't be there</tt></td>
</tr>
<tr class="c4">
<td><tt>23:57.00</tt></td>
<td><span class="c6"><tt>``Erik</tt></span></td>
<td width="100%"><tt>starseeker: zomfg real talking filibuster
going on now O.o /. has it</tt></td>
</tr>
<tr class="c4">
<td><tt>23:57.33</tt></td>
<td><span class="c6"><tt>``Erik</tt></span></td>
<td width="100%"><tt>(or, going on today, anyway)</tt></td>
</tr>
</table>
<br />
Generated by irclog2html.pl Modified by <a href=
"http://Rikers.org">Tim Riker</a> to work with <a href=
"http://infobot.sourceforge.net/">infobot</a>.
</body>
</html>
