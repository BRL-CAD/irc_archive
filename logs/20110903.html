<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.6.0" />
<title>IRC log for #brlcad on 20110903</title>
<meta name="generator" content="irclog2html.pl" />
<meta http-equiv="Content-Type" content=
"text/html; charset=utf-8" />
<style type="text/css">
/*<![CDATA[*/
 body {
  background-color: #FFFFFF;
  color: #000000;
 }
 span.c7 {color: #5EB2B2}
 span.c6 {color: #6868C6}
 span.c5 {color: #009900}
 span.c4 {color: #000099}
 tr.c3 {background-color: #EEEEEE}
 span.c2 {color: #C0C065}
 ins.c1 {display:inline-block;width:728px;height:90px}
/*]]>*/
</style>
</head>
<body>
<h1>IRC log for #brlcad on 20110903</h1>
<script async="async" src=
"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Default -->
<ins class="adsbygoogle c1" data-ad-client=
"ca-pub-1563266826402652" data-ad-slot="5026919875"></ins> 
<script>
<![CDATA[

(adsbygoogle = window.adsbygoogle || []).push({});
]]>
</script>
<form action="http://www.google.com" id="cse-search-box">
<div><input type="hidden" name="cx" value=
"partner-pub-1563266826402652:3301963896" /> <input type="hidden"
name="ie" value="UTF-8" /> <input type="text" name="q" size="55" />
<input type="submit" name="sa" value="Search" /></div>
</form>
<script type="text/javascript" src=
"http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<table cellspacing="3" cellpadding="2" border="0">
<tr class="c3">
<td><tt>01:44.48</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>yeah, the two should be decoupled, but even at
a low framerate, that penetration shouldn't happen -- implies
something is amiss</tt></td>
</tr>
<tr class="c3">
<td><tt>01:44.55</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>still, that is fantastic</tt></td>
</tr>
<tr class="c3">
<td><tt>01:45.17</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>haven't seen a proper brl-cad animation since
the old joint days, probably 8 years ago</tt></td>
</tr>
<tr>
<td><tt>03:59.59</tt></td>
<td colspan="2"><tt><span class="c4">*** part/#brlcad n_reed
(~nreed1@c-68-55-142-136.hsd1.md.comcast.net)</span></tt></td>
</tr>
<tr>
<td><tt>04:28.20</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad kunigami
(~kunigami@201.53.206.27)</span></tt></td>
</tr>
<tr class="c3">
<td><tt>05:42.02</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>Thanks everyone :)</tt></td>
</tr>
<tr class="c3">
<td><tt>05:42.45</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>brlcad: Yes the view seems to change to
accomodate all objects with the 1024 by 1024 image size</tt></td>
</tr>
<tr class="c3">
<td><tt>05:43.03</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>I ll play around with the rtcheck parameters
to see whats up</tt></td>
</tr>
<tr class="c3">
<td><tt>05:43.49</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>I mean rt</tt></td>
</tr>
<tr class="c3">
<td><tt>05:45.12</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>Yeah I think the penetration will no happen if
I specify a plane as the ground plane</tt></td>
</tr>
<tr class="c3">
<td><tt>05:46.15</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>currently I make a box shape with the same
parameters as a arb8 shape in mged (the command looks for a gp.s
arb8 shape and uses its bb for the ground plane)</tt></td>
</tr>
<tr class="c3">
<td><tt>05:46.39</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>but yeah that cant be an excuse, penetration
shouldnt happen either way</tt></td>
</tr>
<tr>
<td><tt>09:12.51</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad archivist
(~archivist@host81-149-189-98.in-addr.btopenworld.com)</span></tt></td>
</tr>
<tr>
<td><tt>09:52.50</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad archivist
(~archivist@host81-149-189-98.in-addr.btopenworld.com)</span></tt></td>
</tr>
<tr>
<td><tt>12:27.38</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad abhi2011
(~chatzilla@ip170-79-211-87.adsl2.static.versatel.nl)</span></tt></td>
</tr>
<tr>
<td><tt>12:56.30</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad abhi2011
(~chatzilla@ip170-79-211-87.adsl2.static.versatel.nl)</span></tt></td>
</tr>
<tr class="c3">
<td><tt>12:58.13</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>abhi2011: the "what's up" is that a view isn't
specified, so it just autosizes the view based on what is being
drawn</tt></td>
</tr>
<tr class="c3">
<td><tt>12:58.50</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>the view merely needs to be specified (if you
run "saveview" within mged, you'll get a view script that you could
re-use to render each frame consistently)</tt></td>
</tr>
<tr class="c3">
<td><tt>12:59.02</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>oh ok, I ll try that</tt></td>
</tr>
<tr class="c3">
<td><tt>12:59.23</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>I have 1 more question</tt></td>
</tr>
<tr class="c3">
<td><tt>12:59.30</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so I have been trying to draw a stack of
cubes</tt></td>
</tr>
<tr class="c3">
<td><tt>12:59.34</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>upon each other</tt></td>
</tr>
<tr class="c3">
<td><tt>12:59.36</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>in mged</tt></td>
</tr>
<tr class="c3">
<td><tt>12:59.44</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so I run a tcl loop</tt></td>
</tr>
<tr class="c3">
<td><tt>12:59.54</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>I suspect the penetration is because you're
using AABBs</tt></td>
</tr>
<tr class="c3">
<td><tt>13:00.25</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>you're passing the aabb's to bullet as simple
cubes .. bullet applies rotations to them which causes them to
tumble</tt></td>
</tr>
<tr class="c3">
<td><tt>13:00.38</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>you correctly apply the tumble transformation
to them</tt></td>
</tr>
<tr class="c3">
<td><tt>13:01.15</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>but don't feed bullet new aabbs (as they get
bigger when the arb8 tumbles), so it's allowed to get too close to
the surface</tt></td>
</tr>
<tr class="c3">
<td><tt>13:02.22</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>I suspect if you changed the arb8s to all
spheres, it wouldn't penetrate (but then the spheres would bounce
off each other before they actually touch)</tt></td>
</tr>
<tr class="c3">
<td><tt>13:02.36</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>at least until you get the custom collision
handler implemented</tt></td>
</tr>
<tr class="c3">
<td><tt>13:02.37</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes, but bullet maintains it own aabbs
too</tt></td>
</tr>
<tr class="c3">
<td><tt>13:02.55</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>thats how it eliminates a large number of
objects in broadphase collison detection</tt></td>
</tr>
<tr class="c3">
<td><tt>13:02.55</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>so sounds like three things todo</tt></td>
</tr>
<tr class="c3">
<td><tt>13:03.54</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>1) you need some means to update the bb to
bullet each timestep if that's not happening already, not just
reusing the original bb</tt></td>
</tr>
<tr class="c3">
<td><tt>13:05.13</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>2) you'll need to register a custom collision
detection callback for bullet to call, this will be a callback you
write that shoots a simple small grid of rays</tt></td>
</tr>
<tr class="c3">
<td><tt>13:05.33</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>3) render with a view set ;)</tt></td>
</tr>
<tr class="c3">
<td><tt>13:13.24</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c3">
<td><tt>13:13.48</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes, actually I dont set the aabb at all in
bullet</tt></td>
</tr>
<tr class="c3">
<td><tt>13:14.08</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>I just make a box with the same  dimensions as
the aabb</tt></td>
</tr>
<tr class="c3">
<td><tt>13:14.29</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>I suspect bullet updates the aabb, but maybe
not</tt></td>
</tr>
<tr class="c3">
<td><tt>13:15.11</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so I was thinking about the sphere dropping on
a plane scenario</tt></td>
</tr>
<tr class="c3">
<td><tt>13:15.35</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>what I would do now is create a cube aligned
to the aabb of the sphere</tt></td>
</tr>
<tr class="c3">
<td><tt>13:15.39</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>and start the sim</tt></td>
</tr>
<tr class="c3">
<td><tt>13:16.08</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>when the cube touches the ground plane, then
bullet would generate a bunch of contact points all along the
bottom face of the aabb</tt></td>
</tr>
<tr class="c3">
<td><tt>13:16.27</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>however at this point I am arranging for a
callback to my code</tt></td>
</tr>
<tr class="c3">
<td><tt>13:17.42</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>in this callback function, I ll use rtcheck or
something similar to check the regions which overlap, which in this
case would be a sphere region and a ground plane region</tt></td>
</tr>
<tr class="c3">
<td><tt>13:18.25</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>and I ll modify the contact point list to the
1 single point at the bottom of the sphere which actually makes
contact from the region perspective</tt></td>
</tr>
<tr class="c3">
<td><tt>13:19.10</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>consequently the sphere region aabb may roll
over as its contact points have been modified</tt></td>
</tr>
<tr class="c3">
<td><tt>13:19.32</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>note I am not talking about geometry here at
all as discussed before</tt></td>
</tr>
<tr class="c3">
<td><tt>13:20.34</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>I am dealing simply with regions and their
aabbs :)</tt></td>
</tr>
<tr class="c3">
<td><tt>13:21.14</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>all this is based on the fact that a tool does
exist in brl-cad which can give me a list of contact points when 2
regions overlap in 3d space</tt></td>
</tr>
<tr class="c3">
<td><tt>13:37.40</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>so a tool exists, but I think you'll find it
even easier to shoot the rays yourself (where you can easily
control the resolution)</tt></td>
</tr>
<tr class="c3">
<td><tt>13:38.12</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c3">
<td><tt>13:39.18</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>as for the aabbs, that was my point -- you
pass the aabb (which you feed to bullet as a box), bullet treats it
as a box and begins to tumble and apply rotations</tt></td>
</tr>
<tr class="c3">
<td><tt>13:39.57</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>once you apply that rotation which came back
from bullet, the bb needs to be recalculated and set AGAIN in
bullet</tt></td>
</tr>
<tr class="c3">
<td><tt>13:40.22</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>if you do that, then there will be no object
bounding box penetration</tt></td>
</tr>
<tr class="c3">
<td><tt>13:40.50</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>then you can write the collision detection
callback that will more accurately report the contact points when
bb's overlap</tt></td>
</tr>
<tr class="c3">
<td><tt>13:41.44</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok yeah I can do that for sure, it would
require calculating the aabb every simulation tick but that should
be ok</tt></td>
</tr>
<tr class="c3">
<td><tt>13:42.01</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>yeah, should be instantaneous until the
objects get into the thousands</tt></td>
</tr>
<tr class="c3">
<td><tt>13:42.39</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>the collision detection callback is going to
be what slows things down a little</tt></td>
</tr>
<tr class="c3">
<td><tt>13:43.18</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>but what I suggest is starting with the bare
minimum, shooting two 3x3 grids of rays</tt></td>
</tr>
<tr class="c3">
<td><tt>13:44.22</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok, but 3 by 3 grid means, if the rays are far
apart then they may miss many cubes</tt></td>
</tr>
<tr class="c3">
<td><tt>13:44.25</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>er, 3x3x3 grid of rays, a 3x3 for each axis,
giving you 27 rays</tt></td>
</tr>
<tr class="c3">
<td><tt>13:44.35</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c3">
<td><tt>13:44.51</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>that's just a starting point to make sure
things are working</tt></td>
</tr>
<tr class="c3">
<td><tt>13:44.55</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c3">
<td><tt>13:45.47</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>that number can EASILY be increased for better
detection, but it will slow things down at a cubic rate</tt></td>
</tr>
<tr class="c3">
<td><tt>13:46.02</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes true</tt></td>
</tr>
<tr class="c3">
<td><tt>13:46.21</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>no point in resetting the contatc manifold
multiple times in the same frame</tt></td>
</tr>
<tr class="c3">
<td><tt>13:48.06</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>though different rays would pass through the
overlap region in different places, so new points would be
generated by every ray within the overlap region</tt></td>
</tr>
<tr class="c3">
<td><tt>13:50.11</tt></td>
<td><span class="c2"><tt>brlcad</tt></span></td>
<td width="100%"><tt>yes, and the points generated would be precise
including the contact point and hit point normal</tt></td>
</tr>
<tr class="c3">
<td><tt>14:42.53</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>by the way I came across a strange issue while
moving objects into position in mged</tt></td>
</tr>
<tr class="c3">
<td><tt>14:43.07</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so I generally use
rt_matrix_transform()</tt></td>
</tr>
<tr class="c3">
<td><tt>14:43.43</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>seems if i directly pass it a matrix in the
opengl format (after transposing it as brlcad is row major while
opengl is column major)</tt></td>
</tr>
<tr class="c3">
<td><tt>14:43.56</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>then the rotations are applied first and then
the translation</tt></td>
</tr>
<tr class="c3">
<td><tt>14:44.10</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so the object ends up in a wierd
place</tt></td>
</tr>
<tr class="c3">
<td><tt>14:44.44</tt></td>
<td><span class="c6"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>currently i translate to the origin , do the
rotation  and then translate again wrt orgin to get to the final
position</tt></td>
</tr>
<tr>
<td><tt>17:22.31</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad juanman
(~quassel@unaffiliated/juanman)</span></tt></td>
</tr>
<tr>
<td><tt>17:26.43</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad abhi2011_
(~chatzilla@x033197.its-s.tudelft.nl)</span></tt></td>
</tr>
<tr>
<td><tt>17:30.23</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad abhi2011
(~chatzilla@x033197.its-s.tudelft.nl)</span></tt></td>
</tr>
<tr>
<td><tt>18:19.57</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad abhi2011_
(~chatzilla@ip170-79-211-87.adsl2.static.versatel.nl)</span></tt></td>
</tr>
<tr>
<td><tt>19:14.18</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad merzo
(~merzo@170-171-133-95.pool.ukrtel.net)</span></tt></td>
</tr>
<tr>
<td><tt>19:33.52</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad abhi2011
(~chatzilla@ip170-79-211-87.adsl2.static.versatel.nl)</span></tt></td>
</tr>
<tr class="c3">
<td><tt>20:56.07</tt></td>
<td><span class="c7"><tt>CIA-62</tt></span></td>
<td width="100%"><tt>BRL-CAD: 03jordisayol * r46563
10/brlcad/trunk/misc/debian/control: Change building dependencies
from make to cmake for debian sources</tt></td>
</tr>
<tr>
<td><tt>21:04.40</tt></td>
<td colspan="2"><tt><span class="c5">*** join/#brlcad jordisayol
(~jordisayo@unaffiliated/jordisayol)</span></tt></td>
</tr>
</table>
<br />
Generated by irclog2html.pl Modified by <a href=
"http://Rikers.org">Tim Riker</a> to work with <a href=
"http://infobot.sourceforge.net/">infobot</a>.
</body>
</html>
