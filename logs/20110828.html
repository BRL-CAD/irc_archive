<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.6.0" />
<title>IRC log for #brlcad on 20110828</title>
<meta name="generator" content="irclog2html.pl" />
<meta http-equiv="Content-Type" content=
"text/html; charset=utf-8" />
<style type="text/css">
/*<![CDATA[*/
 body {
  background-color: #FFFFFF;
  color: #000000;
 }
 span.c5 {color: #5E5EB3}
 tr.c4 {background-color: #EEEEEE}
 span.c3 {color: #6FD36F}
 span.c2 {color: #009900}
 ins.c1 {display:inline-block;width:728px;height:90px}
/*]]>*/
</style>
</head>
<body>
<h1>IRC log for #brlcad on 20110828</h1>
<script async="async" src=
"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Default -->
<ins class="adsbygoogle c1" data-ad-client=
"ca-pub-1563266826402652" data-ad-slot="5026919875"></ins> 
<script>
<![CDATA[

(adsbygoogle = window.adsbygoogle || []).push({});
]]>
</script>
<form action="http://www.google.com" id="cse-search-box">
<div><input type="hidden" name="cx" value=
"partner-pub-1563266826402652:3301963896" /> <input type="hidden"
name="ie" value="UTF-8" /> <input type="text" name="q" size="55" />
<input type="submit" name="sa" value="Search" /></div>
</form>
<script type="text/javascript" src=
"http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<table cellspacing="3" cellpadding="2" border="0">
<tr>
<td><tt>09:01.02</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad DarkCalfz
(DC@173.231.40.98)</span></tt></td>
</tr>
<tr>
<td><tt>09:19.28</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad plaes
(~plaes@gn237.zone.eu)</span></tt></td>
</tr>
<tr>
<td><tt>10:24.09</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad abhi2011
(~chatzilla@ip170-79-211-87.adsl2.static.versatel.nl)</span></tt></td>
</tr>
<tr>
<td><tt>10:38.15</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad archivist
(~archivist@host81-149-189-98.in-addr.btopenworld.com)</span></tt></td>
</tr>
<tr>
<td><tt>10:38.15</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad alex_joni
(~alex_joni@emc/board-of-directors/alexjoni)</span></tt></td>
</tr>
<tr>
<td><tt>10:38.51</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad CIA-62
(~CIA@cia.atheme.org)</span></tt></td>
</tr>
<tr>
<td><tt>10:39.08</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad plaes
(~plaes@gn237.zone.eu)</span></tt></td>
</tr>
<tr>
<td><tt>10:39.43</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad betta_y_omega
(~betta_y_o@90.166.231.220)</span></tt></td>
</tr>
<tr>
<td><tt>10:39.43</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad kanzure
(~kanzure@131.252.130.248)</span></tt></td>
</tr>
<tr>
<td><tt>10:40.33</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad DarkCalfz
(DC@173.231.40.98)</span></tt></td>
</tr>
<tr>
<td><tt>10:40.33</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad kunigami2
(~kunigami@loco-gw.ic.unicamp.br)</span></tt></td>
</tr>
<tr>
<td><tt>10:40.33</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad ``Erik
(Here@c-69-140-109-104.hsd1.md.comcast.net)</span></tt></td>
</tr>
<tr>
<td><tt>10:40.38</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad merzo
(~merzo@12-152-132-95.pool.ukrtel.net)</span></tt></td>
</tr>
<tr>
<td><tt>10:41.58</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad KimK
(~Kim__@209.248.147.2.nw.nuvox.net)</span></tt></td>
</tr>
<tr>
<td><tt>10:41.58</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad packrat
(~packrator@99-67-225-40.lightspeed.livnmi.sbcglobal.net)</span></tt></td>
</tr>
<tr>
<td><tt>10:41.58</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad starseeker
(~starseeke@BZ.BZFLAG.BZ)</span></tt></td>
</tr>
<tr>
<td><tt>10:45.33</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad louipc
(~louipc@archlinux/trusteduser/louipc)</span></tt></td>
</tr>
<tr>
<td><tt>10:45.33</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad brlcad
(~sean@BZ.BZFLAG.BZ)</span></tt></td>
</tr>
<tr>
<td><tt>13:45.10</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad abhi2011
(~chatzilla@ip170-79-211-87.adsl2.static.versatel.nl)</span></tt></td>
</tr>
<tr class="c4">
<td><tt>13:46.37</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>is there a way to calculate a transformation
matrix to convert between co-ordinate systems</tt></td>
</tr>
<tr class="c4">
<td><tt>13:47.17</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>bullet's co-ordinate system assumes the y axis
as up, but is right handed, just like mged</tt></td>
</tr>
<tr class="c4">
<td><tt>13:48.09</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so objects fall towards the xz plane when
gravity is applied</tt></td>
</tr>
<tr class="c4">
<td><tt>13:48.45</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the transformation matrix has to map the
translations and rotations to mged's co-ordinate system
correctly</tt></td>
</tr>
<tr class="c4">
<td><tt>13:57.08</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>i ll try a simple rotation about the
x-axis</tt></td>
</tr>
<tr class="c4">
<td><tt>14:55.21</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>trying to reset some primtives to the origin
before the simulation starts</tt></td>
</tr>
<tr class="c4">
<td><tt>14:55.47</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>apparently rt_matrix_transform() applies a
translation/rotation to the existing transform</tt></td>
</tr>
<tr class="c4">
<td><tt>14:56.22</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>there does not seem to be a functions that can
directly set the absolute world transform of a
comb/primitive</tt></td>
</tr>
<tr>
<td><tt>15:29.17</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad ``Erik
(Here@c-69-140-109-104.hsd1.md.comcast.net)</span></tt></td>
</tr>
<tr>
<td><tt>17:19.42</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad abhi2011
(~chatzilla@ip170-79-211-87.adsl2.static.versatel.nl)</span></tt></td>
</tr>
<tr>
<td><tt>17:29.05</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad merzo
(~merzo@77-191-133-95.pool.ukrtel.net)</span></tt></td>
</tr>
<tr class="c4">
<td><tt>18:28.00</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>abhi2011: perhaps there's a way to specify the
coordinate system to bullet</tt></td>
</tr>
<tr class="c4">
<td><tt>18:29.37</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>otherwise, you can just apply the rotation
before you feed values to bullet and the reverse when you read
values and apply them back on geometry</tt></td>
</tr>
<tr class="c4">
<td><tt>18:32.40</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>brlcad: ok</tt></td>
</tr>
<tr class="c4">
<td><tt>18:33.57</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>about the bounding box function, I have been
trying with combp = (struct rt_comb_internal *)ip-&gt;idb_ptr; and
rt_bound_tree(combp-&gt;tree, tree_min, tree_max)</tt></td>
</tr>
<tr class="c4">
<td><tt>18:34.32</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>however rt_bound_tree() does not implement the
OP_DB_LEAF case which causes the traversal of the tree to get
stuck</tt></td>
</tr>
<tr class="c4">
<td><tt>18:35.50</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so I was considering adding that case, but
even if I rt_bound_tree() does get me to the leaf, it seems the
leaf only had information about a primtive's name</tt></td>
</tr>
<tr class="c4">
<td><tt>18:36.22</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>not its shape information such as a pointer to
its ft_bbox() method etc, or any geometry info</tt></td>
</tr>
<tr class="c4">
<td><tt>18:49.29</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>abhi2011: so it sounds like there's some
disconnect, that you're not setting up something
correctly</tt></td>
</tr>
<tr class="c4">
<td><tt>18:50.59</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>if I recall correctly, you had it working
earlier, when you were mimicking what the bb command does (ala
_ged_get_obj_bounds)</tt></td>
</tr>
<tr class="c4">
<td><tt>18:51.13</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>now you're basically saying that method
doesn't work</tt></td>
</tr>
<tr class="c4">
<td><tt>18:51.22</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>but you had it working for combs, so what's
changed?</tt></td>
</tr>
<tr class="c4">
<td><tt>18:55.53</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>IF ip is a comb (which you have to check),
then you still have to call rt_gettree() to "load" the members of
that comb and calculate the primitive bb's (and THEN you can call
rt_bound_tree() to get the overall comb bb)</tt></td>
</tr>
<tr class="c4">
<td><tt>18:56.57</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>read src/libged/get_obj_bounds.c again -- it
does what you're trying to do</tt></td>
</tr>
<tr class="c4">
<td><tt>18:57.12</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>it just starts with a char*name instead of an
rt_db_internal</tt></td>
</tr>
<tr class="c4">
<td><tt>18:58.39</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>when your function is done and working, it
should drop right into _ged_get_obj_bounds() and
_ged_get_obj_bounds2()</tt></td>
</tr>
<tr class="c4">
<td><tt>18:58.58</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>(or better still, into the callers of those
functions so they can be eliminated)</tt></td>
</tr>
<tr class="c4">
<td><tt>19:30.08</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>brlcad: yes I just found that out, that I need
to call rt_gettree() for combs, otherwise the members are not
loaded</tt></td>
</tr>
<tr class="c4">
<td><tt>19:30.24</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>well now I ll get it working</tt></td>
</tr>
<tr class="c4">
<td><tt>19:35.28</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok I got the reason why I had said
rt_bound_tree() was working before</tt></td>
</tr>
<tr class="c4">
<td><tt>19:36.15</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>it was with a standalone program which
obtained a struct rt_i *rtip directly from the the database file ,
using rtip = rt_dirbuild(argv[1], title, sizeof(title));</tt></td>
</tr>
<tr class="c4">
<td><tt>19:36.54</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>this trip does have the primtives and can be
safely passed to rt_gettree(rtip, argv[2]), to load all the
primtives for a combination</tt></td>
</tr>
<tr class="c4">
<td><tt>19:37.19</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>but in the bb box function, I create an in-mem
rtip</tt></td>
</tr>
<tr class="c4">
<td><tt>19:37.40</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>which does not know anything about the
primitives</tt></td>
</tr>
<tr class="c4">
<td><tt>19:37.59</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>as it was not made from the original
file</tt></td>
</tr>
<tr class="c4">
<td><tt>19:39.09</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so calling rt_gettree()  as follows : ( when I
am trying to find the bb for a comb of course), would lead to the
members of that comb still not getting loaded</tt></td>
</tr>
<tr class="c4">
<td><tt>19:40.52</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>if (rt_gettree(rtip, "dummy") &lt;
0){...</tt></td>
</tr>
<tr class="c4">
<td><tt>19:42.36</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the only thing thats changed is the rtip
between the 2 cases (the one where I build rtip using rt_dirbuild()
and the bb function case which uses an in-mem rtip )</tt></td>
</tr>
<tr class="c4">
<td><tt>19:46.44</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>brlcad: thats why the original rtip that was
made from the database file would be needed to get to the
primtives, because rt_gettree() needs to get the original
rtip</tt></td>
</tr>
<tr class="c4">
<td><tt>20:14.34</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>I'm not sure much of that made sense to me
:)</tt></td>
</tr>
<tr class="c4">
<td><tt>20:16.05</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>recounting what you did to me isn't necessary,
I know what you did :)  it was a question to ask yourself to
hopefully help you figure out what you now need to do to get things
working</tt></td>
</tr>
<tr class="c4">
<td><tt>20:18.14</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes ok :) ,  I am certain now that the
original dbip needs to be passed and I ll get the bb using it and
wrap up the function</tt></td>
</tr>
<tr class="c4">
<td><tt>20:18.29</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>perhaps in the near future i ll  be able to
remove it</tt></td>
</tr>
<tr class="c4">
<td><tt>20:19.02</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>if it's a comb, your job is really
easy</tt></td>
</tr>
<tr class="c4">
<td><tt>20:19.58</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>the only real work remaining is/was supposed
to be figuring out how to calculate the bb for a
primitive</tt></td>
</tr>
<tr class="c4">
<td><tt>20:20.14</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>you had *A* solution, just not the ideal
solution</tt></td>
</tr>
<tr class="c4">
<td><tt>20:20.55</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>so you could go with what you had (using the
inmem) ... or figure out how to build an rt_comb_internal by hand
with just that one primitive</tt></td>
</tr>
<tr class="c4">
<td><tt>20:22.31</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>I'd suggest getting it to work for both comb
and prims using the two methods you already know work, then trying
to build the rt_comb_internal as a replacement method for
prims</tt></td>
</tr>
<tr class="c4">
<td><tt>20:22.56</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>that way, the code will be at least functional
and can be tested for any object type</tt></td>
</tr>
<tr>
<td><tt>20:43.09</tt></td>
<td colspan="2"><tt><span class="c2">*** join/#brlcad merzo
(~merzo@194-13-133-95.pool.ukrtel.net)</span></tt></td>
</tr>
<tr class="c4">
<td><tt>21:02.24</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>brlcad: yes, I will be building a
rt_comb_internal for finding the bb of both prims and
combs</tt></td>
</tr>
<tr class="c4">
<td><tt>21:03.46</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the only other thing I will be doing is adding
an extra paramter to rt_bound_internal()</tt></td>
</tr>
<tr class="c4">
<td><tt>21:04.42</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>will make it like :           rt_i
rt_bound_internal(struct rt_i *rtip, struct rt_db_internal *ip,
point_t rpp_min, point_t rpp_max)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:05.06</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>why?  you shouldn't need to do that</tt></td>
</tr>
<tr class="c4">
<td><tt>21:05.14</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ah ha...:)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:05.20</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so that is because</tt></td>
</tr>
<tr class="c4">
<td><tt>21:05.39</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the rtip that I pass to rt_gettree() should be
the original rtip</tt></td>
</tr>
<tr class="c4">
<td><tt>21:05.53</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>not one created from an in-mem dbip</tt></td>
</tr>
<tr class="c4">
<td><tt>21:07.19</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>it feels like we're talking in circles
:)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:07.53</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the in-mem dbip has no geometry information
about the primtives in the model, and consequently neither does the
struct rt_i*  made from it</tt></td>
</tr>
<tr class="c4">
<td><tt>21:08.25</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>well, yeah I know it feels that way, and its
my fault really</tt></td>
</tr>
<tr class="c4">
<td><tt>21:09.09</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the rt_bound_tree(combp-&gt;tree, tree_min,
tree_max) method never worked before actually</tt></td>
</tr>
<tr class="c4">
<td><tt>21:09.13</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>sure, that you found out last week -- you'd
have to add all of the comb's members (that's why you were
researching db_functree())</tt></td>
</tr>
<tr class="c4">
<td><tt>21:09.22</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes exactly</tt></td>
</tr>
<tr class="c4">
<td><tt>21:09.35</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>and db_functree() runs against the same
problem see</tt></td>
</tr>
<tr class="c4">
<td><tt>21:09.45</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>its unable to add the primtives</tt></td>
</tr>
<tr class="c4">
<td><tt>21:10.03</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>because?</tt></td>
</tr>
<tr class="c4">
<td><tt>21:10.04</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>because it uses db_lookup() on the in-mem
db_i</tt></td>
</tr>
<tr class="c4">
<td><tt>21:10.24</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the one I create and pass to it inside the
rt_bound_internal() function</tt></td>
</tr>
<tr class="c4">
<td><tt>21:10.24</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>you don't run functree on the inmem</tt></td>
</tr>
<tr class="c4">
<td><tt>21:11.11</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>youd run functree on the original dbi to add
them to the inmem</tt></td>
</tr>
<tr class="c4">
<td><tt>21:11.11</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes, I should run it on the original  struct
db_i</tt></td>
</tr>
<tr class="c4">
<td><tt>21:11.31</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes, but the original db_i is not
passed</tt></td>
</tr>
<tr class="c4">
<td><tt>21:11.34</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>to the function</tt></td>
</tr>
<tr class="c4">
<td><tt>21:11.43</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so I would need to pass it</tt></td>
</tr>
<tr class="c4">
<td><tt>21:12.30</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>that would be better than passing an rtip, but
still seems unnecessary..</tt></td>
</tr>
<tr class="c4">
<td><tt>21:12.39</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes, umm why</tt></td>
</tr>
<tr class="c4">
<td><tt>21:12.51</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>there is no other way to add the
primitives</tt></td>
</tr>
<tr class="c4">
<td><tt>21:13.14</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>other than picking them form the original
struct db_i and putting them in the in-mem struct db_i</tt></td>
</tr>
<tr class="c4">
<td><tt>21:16.27</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>the why would be because the rt_comb_internal
should already have a union tree * filled out</tt></td>
</tr>
<tr class="c4">
<td><tt>21:16.46</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>the inmem one you were trying didn't, but
that's obvious why .. you only added the comb</tt></td>
</tr>
<tr class="c4">
<td><tt>21:18.25</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>the caller will be passing you an
rt_db_internal that should be filled out, that tree should be
passable to rt_bound_tree() as-is .. no?</tt></td>
</tr>
<tr class="c4">
<td><tt>21:18.42</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>if it's not, it sounds like a problem in the
caller code</tt></td>
</tr>
<tr class="c4">
<td><tt>21:19.24</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>(like not calling dirbuild or gettrees or
something .. don't think it matters which)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:19.24</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes it should be passable to rt_bound_tree(),
however the structure of the tree is wrong</tt></td>
</tr>
<tr class="c4">
<td><tt>21:20.09</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the tree leads to the primtive node , but that
node has just the primtive name</tt></td>
</tr>
<tr class="c4">
<td><tt>21:20.49</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>it does not have any geometry information and
the tr_op is not OP_SOLID</tt></td>
</tr>
<tr class="c4">
<td><tt>21:20.55</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>its OP_DB_LEAF</tt></td>
</tr>
<tr class="c4">
<td><tt>21:20.59</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>which is not correct</tt></td>
</tr>
<tr class="c4">
<td><tt>21:21.18</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>so why is that, sounds like something not
getting set up right</tt></td>
</tr>
<tr class="c4">
<td><tt>21:21.30</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes so let me explain :)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:21.39</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>like I said -- "it sounds like a problem in
the caller code"</tt></td>
</tr>
<tr class="c4">
<td><tt>21:22.21</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>hmm yeah</tt></td>
</tr>
<tr class="c4">
<td><tt>21:22.33</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>the rt_db_internal() should have a complete
tree</tt></td>
</tr>
<tr class="c4">
<td><tt>21:23.56</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>but the caller code is very straight forward :
<a href=
"http://bin.cakephp.org/view/1978180787">http://bin.cakephp.org/view/1978180787</a></tt></td>
</tr>
<tr class="c4">
<td><tt>21:24.36</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>rt_bound_tree() is clearly used by
src/libged/bb.c (via get_obj_bounds.c()) so if they can do the
setup, you should be able to too (even if it requires the caller to
do something first)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:25.23</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c4">
<td><tt>21:25.28</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>so if that caller code isn't working right,
there's something else you need to have it do</tt></td>
</tr>
<tr class="c4">
<td><tt>21:26.35</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>maybe see what rt_gettree() does since that's
what get_obj_bounds.c calls before calling librt</tt></td>
</tr>
<tr class="c4">
<td><tt>21:26.45</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ah!</tt></td>
</tr>
<tr class="c4">
<td><tt>21:26.46</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>you may need to do some subportion of what
it's doing</tt></td>
</tr>
<tr class="c4">
<td><tt>21:27.00</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>so its called before</tt></td>
</tr>
<tr class="c4">
<td><tt>21:27.11</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yes I ll check it</tt></td>
</tr>
<tr class="c4">
<td><tt>21:27.13</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>there's no point in calling rt_gettree in the
caller code because you don't have an rtip</tt></td>
</tr>
<tr class="c4">
<td><tt>21:27.33</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>but maybe there is some other rt function that
sets up and initializes the rt_comb_internal properly</tt></td>
</tr>
<tr class="c4">
<td><tt>21:27.40</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>very likely :)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:27.44</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c4">
<td><tt>21:28.00</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>something related to loading a union tree
*</tt></td>
</tr>
<tr class="c4">
<td><tt>21:29.48</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yeah the first thing get_obj_bounds() does it 
/* Make a new rt_i instance from the existing db_i sructure */ and
finally calls rt_gettree() on it</tt></td>
</tr>
<tr class="c4">
<td><tt>21:31.05</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>which I could do in my caller code too :P, but
lets see if there some other way</tt></td>
</tr>
<tr class="c4">
<td><tt>21:34.47</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>yeah, if the caller had to do all of that, it
would defeat the simplicity we're going for</tt></td>
</tr>
<tr class="c4">
<td><tt>21:35.13</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>if you find out that you have to add a dbip
parameter, that's fine -- but you should make sure first</tt></td>
</tr>
<tr class="c4">
<td><tt>21:37.25</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>well yes, there is no way to intialize the
tree of an  rt_comb_internal() for a regions without doing walk on
the database instance tree using the original db_i</tt></td>
</tr>
<tr class="c4">
<td><tt>21:38.09</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>how do you know that?</tt></td>
</tr>
<tr class="c4">
<td><tt>21:39.14</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>because only the original db_i would have the
information about the geometry of the primitives</tt></td>
</tr>
<tr class="c4">
<td><tt>21:40.02</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>and that db_i would need to be used to look up
any primitive names that we encounter while traversing the tree for
a comb</tt></td>
</tr>
<tr class="c4">
<td><tt>21:40.21</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>right, okay -- I misread what you were
saying</tt></td>
</tr>
<tr class="c4">
<td><tt>21:40.50</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>the question is whether there is already a
routine or simple method that will initialize it for you</tt></td>
</tr>
<tr class="c4">
<td><tt>21:41.02</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>other than rt_gettree()</tt></td>
</tr>
<tr class="c4">
<td><tt>21:46.16</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>if something doesn't exist, that actually
might be a good case for adding a function that creates a non
op_db_leaf union tree suitable for your function (which calling
code would then be required to call beforehand)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:47.31</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>basically something like rt_gettree() but
specifically for combs, like maybe a new rt_comb_tree()
function</tt></td>
</tr>
<tr class="c4">
<td><tt>21:48.15</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c4">
<td><tt>21:48.58</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>i did come across</tt></td>
</tr>
<tr class="c4">
<td><tt>21:48.59</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>db_comb_describe</tt></td>
</tr>
<tr class="c4">
<td><tt>21:49.07</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>and rt_comb_describe()</tt></td>
</tr>
<tr class="c4">
<td><tt>21:52.32</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok yeah, adding a function that creates a non
op_db_leaf union tree would still require passing the original db_i
to it, so all the geometry info about the model is
available</tt></td>
</tr>
<tr class="c4">
<td><tt>21:53.00</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>yes, something like:  union tree
*rt_comb_tree(const struct db_i *dbip, const struct rt_db_internal
*ip)</tt></td>
</tr>
<tr class="c4">
<td><tt>21:55.41</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c4">
<td><tt>21:55.45</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>I hate to say it, because that's probably the
way to go, but I think we're getting out of scope</tt></td>
</tr>
<tr class="c4">
<td><tt>21:55.51</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>a bit at least</tt></td>
</tr>
<tr class="c4">
<td><tt>21:56.27</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>figuring out how to implement that function
properly would probably take a few days at best, a couple weeks at
worst</tt></td>
</tr>
<tr class="c4">
<td><tt>21:56.33</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yeah I dont see any other function in
raytrace.h that could make a rt_comb_internal</tt></td>
</tr>
<tr class="c4">
<td><tt>21:57.10</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>plus figuring out the important parts from
rt_gettree() is probably a little bit out of depth</tt></td>
</tr>
<tr class="c4">
<td><tt>21:57.26</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>that's relatively complex code so it'd be a
challenge</tt></td>
</tr>
<tr class="c4">
<td><tt>21:57.44</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>yah that would really go deep into 3D geometry
I think :P</tt></td>
</tr>
<tr class="c4">
<td><tt>21:57.59</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>not really</tt></td>
</tr>
<tr class="c4">
<td><tt>21:58.06</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>it gets deep into librt structures is
all</tt></td>
</tr>
<tr class="c4">
<td><tt>21:58.13</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c4">
<td><tt>21:58.15</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>at lot of recursion and complex data
structures</tt></td>
</tr>
<tr class="c4">
<td><tt>21:58.41</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>doable, but not immediately relevant for the
goals of this project</tt></td>
</tr>
<tr class="c4">
<td><tt>21:59.07</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>so pass the dbip, but add a FIXME note to the
comment header with the details we've talked about</tt></td>
</tr>
<tr class="c4">
<td><tt>21:59.31</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>ok</tt></td>
</tr>
<tr class="c4">
<td><tt>21:59.34</tt></td>
<td><span class="c5"><tt>brlcad</tt></span></td>
<td width="100%"><tt>stating the need for something like
rt_comb_tree to get a portion of the rt_gettree()
initialization</tt></td>
</tr>
<tr class="c4">
<td><tt>21:59.54</tt></td>
<td><span class="c3"><tt>abhi2011</tt></span></td>
<td width="100%"><tt>right</tt></td>
</tr>
</table>
<br />
Generated by irclog2html.pl Modified by <a href=
"http://Rikers.org">Tim Riker</a> to work with <a href=
"http://infobot.sourceforge.net/">infobot</a>.
</body>
</html>
